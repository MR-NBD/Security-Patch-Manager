# ============================================================
# SPM ORCHESTRATOR - Environment Variables
# Copia in .env e personalizza i valori
# ============================================================

# --- Flask ---
FLASK_ENV=production
FLASK_PORT=5001
FLASK_HOST=0.0.0.0
SECRET_KEY=change-me-to-a-random-string

# --- Database (PostgreSQL locale sulla VM) ---
DB_HOST=localhost
DB_PORT=5432
DB_NAME=spm_orchestrator
DB_USER=spm_orch
DB_PASSWORD=change-me

# --- UYUNI Server (fonte errata, polling gruppi test-*) ---
UYUNI_URL=https://10.172.2.17
UYUNI_USER=admin
UYUNI_PASSWORD=change-me
UYUNI_VERIFY_SSL=false
UYUNI_POLL_INTERVAL_MINUTES=30
UYUNI_TEST_GROUP_PREFIX=test-

# --- Salt API (tramite UYUNI) ---
SALT_API_URL=https://10.172.2.17:9080
SALT_API_USER=saltapi
SALT_API_PASSWORD=change-me

# --- Prometheus ---
PROMETHEUS_URL=http://localhost:9090
PROMETHEUS_TIMEOUT_SECONDS=30

# --- Test Systems (UYUNI System IDs) ---
TEST_SYSTEM_UBUNTU_ID=
TEST_SYSTEM_UBUNTU_NAME=test-ubuntu-01
TEST_SYSTEM_RHEL_ID=
TEST_SYSTEM_RHEL_NAME=test-rhel-01
SNAPSHOT_TYPE=snapper

# --- Test Thresholds ---
TEST_CPU_DELTA_THRESHOLD=20
TEST_MEMORY_DELTA_THRESHOLD=15
TEST_MAX_FAILED_SERVICES=0
TEST_WAIT_AFTER_PATCH_SECONDS=300
TEST_WAIT_AFTER_REBOOT_SECONDS=180
TEST_TIMEOUT_MINUTES=30

# --- Success Score Weights ---
SCORE_KERNEL_PENALTY=30
SCORE_REBOOT_PENALTY=15
SCORE_CONFIG_PENALTY=10
SCORE_DEP_PENALTY_PER=3
SCORE_DEP_PENALTY_MAX=15
SCORE_SIZE_PENALTY_MB=2
SCORE_SIZE_PENALTY_MAX=10
SCORE_HISTORY_PENALTY_MAX=20
SCORE_MIN_TESTS_HISTORY=3

# --- Notifications ---
NOTIFY_EMAIL_ENABLED=false
SMTP_SERVER=
SMTP_PORT=587
SMTP_TLS=true
SMTP_USER=
SMTP_PASSWORD=
NOTIFY_FROM=spm-orchestrator@example.com
NOTIFY_RECIPIENTS=ops@example.com
NOTIFY_DIGEST_TIME=08:00

# --- Logging ---
LOG_LEVEL=INFO
LOG_FILE=/var/log/spm-orchestrator/app.log
